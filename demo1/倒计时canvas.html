<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        #canvas{
            border: 1px solid #E3E3E3;
        }
    </style>
    <script src="js/digit.js"></script>
    <script>
        window.onload=function(){
            var canvas=document.getElementById("canvas");
            /*可配置的参数*/
            var window_width=1300;
            var window_height=600;
            var radius=8;//点阵圆半径
            var digitWidth=7;//每一个数字点阵圆的数量
            var tokenWidth=4;//冒号数字点阵圆的数量
            var margin_top=150;//整体y轴偏移量
            var margin_left=100;//x轴偏移量

            var context=canvas.getContext("2d");
            canvas.width=window_width;
            canvas.height=window_height;
            context.fillStyle="#33B5E5";

//            var hours=14;
//            var minutes=09;
//            var seconds=35;

            //目标结束时间
            var eDate={
                year:new Date().getFullYear(),
                date:23,
                hours:0,
                minutes:0,
                seconds:0
            };

            var endDate=new Date();
            endDate.setYear(eDate.year);
            endDate.setDate(eDate.date);
            endDate.setHours(eDate.hours);
            endDate.setMinutes(eDate.minutes);
            endDate.setSeconds(eDate.seconds);

            function upDate(){
                endTime=(endDate.getTime()-(new Date().getTime()))/1000;
                hours=parseInt(endTime/3600);
                minutes=parseInt((endTime-(hours*3600))/60);
                seconds=endTime%60;
            }


            function draw(){
                context.clearRect(0,0,window_width,window_height);
//            drawDigit(0,0,5,context);
                drawDigit(0,0,parseInt(hours/10),context);
                drawDigit(digitWidth*2*(radius+1)+20,0,parseInt(hours%10),context);
                drawDigit(2*(digitWidth*2*(radius+1)+20),0,10,context);
                drawDigit(2*(digitWidth*2*(radius+1)+20) + tokenWidth*2*(radius+1)+20 ,0,parseInt(minutes/10),context);
                drawDigit(3*(digitWidth*2*(radius+1)+20) + tokenWidth*2*(radius+1)+20 ,0,parseInt(minutes%10),context);
                drawDigit(4*(digitWidth*2*(radius+1)+20) + tokenWidth*2*(radius+1)+20 ,0,10,context);
                drawDigit(4*(digitWidth*2*(radius+1)+20) + 2*(tokenWidth*2*(radius+1)+20) ,0,parseInt(seconds/10),context);
                drawDigit(5*(digitWidth*2*(radius+1)+20) + 2*(tokenWidth*2*(radius+1)+20) ,0,parseInt(seconds%10),context);
            }

            upDate();
            draw();
            setInterval(function(){
                upDate();
                draw();
            },1000);


            function drawDigit(x,y,num,context){
                for(var i=0;i<digit[num].length;i++){
                    for(var j=0;j<digit[num][i].length;j++){
                        if(digit[num][i][j]==1){
                            context.beginPath();
                            context.arc(margin_left+x+j*2*(radius+1)+(radius+1),margin_top+y+i*2*(radius+1)+(radius+1),radius,0,2*Math.PI);
                            context.fill();
                            context.closePath();
                        }
                    }
                }
            }


        }
    </script>
</head>
<body>
    <canvas id="canvas"></canvas>
</body>
</html>